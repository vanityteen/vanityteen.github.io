<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="çŸ¥è¯†ç›²ç›’">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="çŸ¥è¯†ç›²ç›’">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Carpe diem !">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>çŸ¥è¯†ç›²ç›’</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">çŸ¥è¯†ç›²ç›’</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">äººç”Ÿå¾ˆçŸ­ä½•å¿…ä¸å¼€å¿ƒ</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/20/Object-defineProperty/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Carpe diem !">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="çŸ¥è¯†ç›²ç›’">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/20/Object-defineProperty/" class="post-title-link" itemprop="url">Object.defineProperty</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-04-20 10:15:20" itemprop="dateCreated datePublished" datetime="2023-04-20T10:15:20+08:00">2023-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-04-21 16:25:42" itemprop="dateModified" datetime="2023-04-21T16:25:42+08:00">2023-04-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty()"></a>Object.defineProperty()</h1><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, prop, descriptor);</span><br></pre></td></tr></table></figure>

<h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><ul>
<li>objï¼šè¦å®šä¹‰å±æ€§çš„å¯¹è±¡</li>
<li>propï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°æˆ– Symbol</li>
<li>descriptorï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦</li>
</ul>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;age&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">24</span>,</span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//  å¯¹è±¡ obj æ‹¥æœ‰å±æ€§ ageï¼Œå€¼ä¸º 24</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>åº”å½“ç›´æ¥åœ¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object"  style="text-decoration: underline;">Object</a> æ„é€ å™¨å¯¹è±¡ä¸Šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨ä»»æ„ä¸€ä¸ª Object ç±»å‹çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚</p>
</blockquote>
<h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><blockquote>
<p>å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•° descriptor æ‰€è¡¨ç¤ºçš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§å½¢å¼ï¼š<b><i>æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦</i></b>ã€‚æ•°æ®æè¿°ç¬¦æ˜¯ä¸€ä¸ªå…·æœ‰å€¼çš„å±æ€§ï¼Œè¯¥å€¼å¯ä»¥æ˜¯å¯å†™çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸å¯å†™çš„ã€‚å­˜å–æè¿°ç¬¦æ˜¯ç”± getter å‡½æ•°å’Œ setter å‡½æ•°æ‰€æè¿°çš„å±æ€§ã€‚ä¸€ä¸ªæè¿°ç¬¦åªèƒ½æ˜¯è¿™ä¸¤è€…å…¶ä¸­ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…ã€‚</p>
</blockquote>
<p><strong>ä¸¤è€…å‡å…·æœ‰ä»¥ä¸‹ä¸¤ç§é”®å€¼</strong>ï¼š</p>
<ul>
<li><span style="background-color: #fff4f4; color: #c2185b; padding: 4px;">âš™ï¸ configurable</span><br>å½“ä¸”ä»…å½“è¯¥å±æ€§çš„ configurable ä¸º true æ—¶ï¼Œè¯¥å±æ€§æè¿°ç¬¦æ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼Œä¹Ÿèƒ½å¤Ÿè¢«åˆ é™¤ã€‚é»˜è®¤ä¸º falseã€‚<br/></li>
<li><span style="background-color: #fff4f4; color: #c2185b; padding: 4px;">ğŸ“„ enumerable</span><br>å½“ä¸”ä»…å½“è¯¥å±æ€§çš„ enumerable é”®å€¼ä¸º true æ—¶ï¼Œè¯¥å±æ€§æ‰ä¼šå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚ é»˜è®¤ä¸º falseã€‚</li>
</ul>
<p><strong>æ•°æ®æè¿°ç¬¦å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼</strong>ï¼š</p>
<ul>
<li><span style="background-color: #fff4f4; color: #c2185b; padding: 4px;">ğŸ’¸ value</span><br>è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ JavaScript å€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚ é»˜è®¤ä¸º undefinedã€‚<br/></li>
<li><span style="background-color: #fff4f4; padding: 4px;">âœ writable</span><br>å½“ä¸”ä»…å½“è¯¥å±æ€§çš„ writable é”®å€¼ä¸º true æ—¶ï¼Œå±æ€§çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„ valueï¼Œæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚ é»˜è®¤ä¸º falseã€‚</li>
</ul>
<p>æ„æ€æ˜¯ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ Object.defineProperty() æ·»åŠ çš„å±æ€§å€¼æ˜¯ä¸å¯ä¿®æ”¹ï¼ˆ<span style="background-color: #fff4f4; color: #c2185b; padding: 4px;">immutable</span>ï¼‰çš„ï¼Œä¾‹å¦‚æˆ‘é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¿®æ”¹ defineProperty æ·»åŠ çš„å±æ€§ï¼š</p>
<ol>
<li>å¦‚æœé€šè¿‡ Object.defineProperty() é‡æ–°ä¿®æ”¹ Object.defineProperty() å®šä¹‰è¿‡çš„å±æ€§ï¼Œä¼šè¢«æç¤ºä¸èƒ½é‡å¤å®šä¹‰:Uncaught TypeError: Cannot redefine property: xxxï¼›</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;alice&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//&#123;name: &#x27;alice&#x27;&#125;</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;aaa&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Uncaught TypeError: Cannot redefine property: name</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å¦‚æœé€šè¿‡å¯¹è±¡.å±æ€§ = xxx çš„å½¢å¼å°è¯•ä¿®æ”¹ç”¨ Object.defineProperty() æ–°å¢çš„å±æ€§ï¼Œè™½ç„¶æ²¡æœ‰è¯­æ³•é”™è¯¯ï¼Œä½†æ˜¯å½“å†æ¬¡è®¿é—®æ—¶ï¼Œç»“æœè¿˜æ˜¯ Object.defineProperty() ä¹‹å‰å®šä¹‰çš„å€¼</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;alice&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;tom&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">//alice</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å…ˆå®šä¹‰äº†å±æ€§çš„ï¼Œå†é€šè¿‡ Object.defineProperty()æ¥ä¿®æ”¹ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹ç›¸å…³é…ç½®ï¼Œæ˜¯å¯ä»¥é€šè¿‡ å¯¹è±¡.å±æ€§=xxx çš„å½¢å¼æˆ–è€…é€šè¿‡ Object.defineProperty()å†æ¬¡ä¿®æ”¹çš„</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;lbj&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">//lbj</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;alice&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">//alice</span></span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;tom&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">//tom</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;aaa&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">//aaa</span></span><br></pre></td></tr></table></figure>

<p>æ€ä¹ˆä¼šè¿™æ ·å­å‘¢ï¼Ÿå…¶å®æ˜¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;lbj&quot;</span>;</span><br><span class="line"><span class="comment">// ç­‰åŒäºï¼š</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;lbj&quot;</span>,</span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>å­˜å–æè¿°ç¬¦è¿˜å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼</strong>ï¼š</p>
<ul>
<li><span style="background-color: #fff4f4; color: #c2185b; padding: 4px;">ğŸ“¤ get</span><br>ä¸€ä¸ªç»™å±æ€§æä¾› getter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ getterï¼Œåˆ™ä¸º undefinedã€‚å½“è®¿é—®è¯¥å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚æ‰§è¡Œæ—¶ä¸ä¼ å…¥ä»»ä½•å‚æ•°ï¼Œä½†æ˜¯ä¼šä¼ å…¥ this å¯¹è±¡ï¼ˆç”±äºç»§æ‰¿å…³ç³»ï¼Œè¿™é‡Œçš„ this å¹¶ä¸ä¸€å®šæ˜¯å®šä¹‰è¯¥å±æ€§çš„å¯¹è±¡ï¼‰ã€‚è¯¥å‡½æ•°çš„è¿”å›å€¼ä¼šè¢«ç”¨ä½œå±æ€§çš„å€¼ã€‚ é»˜è®¤ä¸º undefinedã€‚<br/></li>
<li><span style="background-color: #fff4f4; color: #c2185b; padding: 4px;">ğŸ“¥ set</span><br>å±æ€§çš„ setter å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ setterï¼Œåˆ™ä¸º undefinedã€‚å½“å±æ€§å€¼è¢«ä¿®æ”¹æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆä¹Ÿå°±æ˜¯è¢«èµ‹äºˆçš„æ–°å€¼ï¼‰ï¼Œä¼šä¼ å…¥èµ‹å€¼æ—¶çš„ this å¯¹è±¡ã€‚ é»˜è®¤ä¸º undefinedã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆ<strong>å±æ€§æè¿°ç¬¦å¿…é¡»æ˜¯æ•°æ®æè¿°ç¬¦æˆ–è€…å­˜å–æè¿°ç¬¦ä¸¤ç§å½¢å¼ä¹‹ä¸€ï¼Œä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…</strong>ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼ä¸€</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(&#123;&#125;, <span class="string">&quot;num&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼äºŒ</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(&#123;&#125;, <span class="string">&quot;num&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">newValue</span>) &#123;</span><br><span class="line">    value = newValue;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ¥é”™</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(&#123;&#125;, <span class="string">&quot;num&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr/>

<h2 id="ğŸ”-ç›‘å¬å¯¹è±¡ä¸Šçš„å¤šä¸ªå±æ€§"><a href="#ğŸ”-ç›‘å¬å¯¹è±¡ä¸Šçš„å¤šä¸ªå±æ€§" class="headerlink" title="ğŸ” ç›‘å¬å¯¹è±¡ä¸Šçš„å¤šä¸ªå±æ€§"></a>ğŸ” ç›‘å¬å¯¹è±¡ä¸Šçš„å¤šä¸ªå±æ€§</h2><p>ä¸€æ¬¡ç›‘å¬å¤šä¸ªå±æ€§çš„å˜åŒ–æˆ‘ä»¬éœ€è¦é…åˆ Object.keys(obj)è¿›è¡Œéå†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(person).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, key, &#123;</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>, <span class="comment">// é»˜è®¤ä¼šä¼ å…¥this</span></span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> person[key];</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹personä¸­çš„<span class="subst">$&#123;key&#125;</span>å±æ€§è¿›è¡Œäº†ä¿®æ”¹`</span>);</span><br><span class="line">      person[key] = val; <span class="comment">// ä¿®æ”¹ä¹‹åå¯ä»¥æ‰§è¡Œæ¸²æŸ“æ“ä½œ...</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåªæ˜¯ä¸Šé¢çš„æ€è·¯ä¸è¯¥ API çš„ç®€å•ç»“åˆï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°å¹¶è¾¾ä¸åˆ°æ•ˆæœã€‚çœ‹èµ·æ¥æ„Ÿè§‰ä¸Šé¢çš„ä»£ç æ²¡æœ‰ä»€ä¹ˆé”™è¯¯ï¼Œä½†æ˜¯è¯•ç€è¿è¡Œä¸€ä¸‹ï¼Œä½ ä¼šå’Œæˆ‘ä¸€æ ·æ ˆæº¢å‡ºã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬èšç„¦åœ¨ get æ–¹æ³•é‡Œï¼Œ<span style="color: #009828;">æˆ‘ä»¬åœ¨è®¿é—® person èº«ä¸Šçš„å±æ€§æ—¶ï¼Œå°±ä¼šè§¦å‘ get æ–¹æ³•ï¼Œè¿”å› person[key]</span>ï¼Œæ‰€ä»¥<span style="background-color: #fff4f4; color: #c2185b; padding: 4px;">è®¿é—® person[key]ä¹Ÿä¼šè§¦å‘ get æ–¹æ³•</span>ï¼Œå¯¼è‡´é€’å½’è°ƒç”¨ï¼Œæœ€ç»ˆæ ˆæº¢å‡ºã€‚</p>
<p>è¿™ä¹Ÿå¼•å‡ºäº†æˆ‘ä»¬ä¸‹é¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªä¸­è½¬ Obseverï¼Œæ¥è®© get ä¸­ return çš„å€¼å¹¶ä¸æ˜¯ç›´æ¥è®¿é—® obj[key]ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">0</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// å®ç°ä¸€ä¸ªå“åº”å¼å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineProperty</span>(<span class="params">obj, key, val</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¿é—®äº†<span class="subst">$&#123;key&#125;</span>å±æ€§`</span>);</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>å±æ€§è¢«ä¿®æ”¹ä¸º<span class="subst">$&#123;newVal&#125;</span>äº†`</span>);</span><br><span class="line">      val = newVal;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®ç°ä¸€ä¸ªéå†å‡½æ•°Observer</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">defineProperty</span>(obj, key, obj[key]);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Observer</span>(person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">age</span>); <span class="comment">// 0</span></span><br><span class="line">person.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">age</span>); <span class="comment">// 18</span></span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”-æ·±åº¦ç›‘å¬ä¸€ä¸ªå¯¹è±¡"><a href="#ğŸ”-æ·±åº¦ç›‘å¬ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="ğŸ” æ·±åº¦ç›‘å¬ä¸€ä¸ªå¯¹è±¡"></a>ğŸ” æ·±åº¦ç›‘å¬ä¸€ä¸ªå¯¹è±¡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;child&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">relationships</span>: &#123;</span><br><span class="line">    <span class="attr">mother</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;mother&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">28</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">father</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;father&quot;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">30</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineProperty</span>(<span class="params">obj, key, val</span>) &#123;</span><br><span class="line">  <span class="comment">//å¦‚æœæŸå¯¹è±¡çš„å±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€’å½’è¿›å…¥è¯¥å¯¹è±¡ï¼Œè¿›è¡Œç›‘å¬</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> val === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="title class_">Observer</span>(val);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¿é—®äº†<span class="subst">$&#123;key&#125;</span>å±æ€§`</span>);</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœnewValæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€’å½’è¿›å…¥è¯¥å¯¹è±¡è¿›è¡Œç›‘å¬</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> newVal === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">        <span class="title class_">Observer</span>(key);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>å±æ€§è¢«ä¿®æ”¹ä¸º<span class="subst">$&#123;newVal&#125;</span>äº†`</span>);</span><br><span class="line">      val = newVal;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="comment">//å¦‚æœä¼ å…¥çš„ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œreturn</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span> || obj === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">defineProperty</span>(obj, key, obj[key]);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Observer</span>(person);</span><br><span class="line">person.<span class="property">relationships</span>.<span class="property">mother</span>.<span class="property">age</span> = <span class="number">24</span>;</span><br><span class="line"><span class="comment">// &quot;è®¿é—®äº†relationshipså±æ€§&quot;</span></span><br><span class="line"><span class="comment">// &quot;è®¿é—®äº†motherå±æ€§&quot;</span></span><br><span class="line"><span class="comment">// &quot;ageå±æ€§è¢«ä¿®æ”¹ä¸º24äº†&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”-ç›‘å¬æ•°ç»„"><a href="#ğŸ”-ç›‘å¬æ•°ç»„" class="headerlink" title="ğŸ” ç›‘å¬æ•°ç»„"></a>ğŸ” ç›‘å¬æ•°ç»„</h3><p>ğŸ§ è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚æœä¸é€šè¿‡éå†æ”¹å˜å¯¹è±¡å±æ€§èƒ½æ£€æµ‹åˆ°å—ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&quot;James&quot;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&quot;LeBron&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, name, &#123;</span><br><span class="line">  <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    name = value;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä½ å–äº†ä¸€ä¸ªåå­—å«åš&quot;</span> + value);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ä½ æ˜¯&quot;</span> + name;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">obj.<span class="property">name</span>.<span class="property">firstName</span> = <span class="string">&quot;Harden&quot;</span>; <span class="comment">// Harden</span></span><br><span class="line">obj.<span class="property">name</span>.<span class="property">firstName</span>; <span class="comment">// Harden</span></span><br></pre></td></tr></table></figure>

<p>ğŸ¤¬ å­å±æ€§å˜åŒ–å®ƒæ˜¯æ£€æµ‹ä¸åˆ°</p>
<p>é‚£ä¸ºä»€ä¹ˆæ£€æµ‹ä¸åˆ°å‘¢ï¼Ÿæœ‰ä»¥ä¸‹ä¸¤ç§å¯èƒ½ï¼š</p>
<p>1ï¸âƒ£ å¯¹è±¡å’Œæ•°ç»„ä½œä¸ºå¼•ç”¨ç±»å‹ä¹‹æ‰€ä»¥æ— æ³•è¢«æ£€æµ‹åˆ°æ˜¯å› ä¸ºæˆ‘ä»¬<span style="color: #009828;">å­˜å‚¨åœ¨æ ˆåŒºçš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å †åŒºçš„æŒ‡é’ˆ</span>ï¼Œæ•°æ®çš„æ”¹å˜ä¸ä¼šå¼•èµ·æŒ‡å‘å…¶æŒ‡é’ˆçš„å˜åŒ–ï¼Œæ‰€ä»¥æ— æ³•è¢« Object.defineProperty<br>2ï¸âƒ£ å¯¹è±¡å’Œå±æ€§å˜åŒ–æ—¶åˆ†å‡ ç§æƒ…å†µï¼Œå½“<span style="color: #009828;">æ–°å¢æ•°æ®æ—¶ç”±äºå±æ€§åï¼ˆç´¢å¼•ï¼‰å¢åŠ </span>è€Œæ— æ³•è¢« Object.defineProperty æ£€æµ‹åˆ°æ‰€ä»¥æ— æ³•é€šè¿‡ Objcet.defineProperty ç›‘æµ‹æ•°ç»„å˜åŒ–ã€‚</p>
<p>ä¹‹æ‰€ä»¥æˆ‘ä»¬æ— æ³•é€šè¿‡<code>Get</code>å’Œ<code>Set</code>å¾—çŸ¥æ•°ç»„çš„æ›´æ”¹ï¼ŒåŸå› æ­£æ˜¯ç±»ä¼¼äºä¸Šè¿°çš„å¯¹è±¡ä¸€èˆ¬ï¼Œ<code>Object.defineProperty</code>æ— æ³•æ£€æµ‹åˆ°æ•°ç»„é•¿åº¦çš„å˜åŒ–ã€‚å‡†ç¡®çš„è¯´æ˜¯æ— æ³•æ£€æµ‹åˆ°é€šè¿‡æ”¹å˜ length è€Œå¢åŠ çš„é•¿åº¦ã€‚</p>
<p>å†æ¥å›é¡¾ä¸€ä¸‹å¯¹è±¡çš„å±æ€§ç±»å‹ï¼š</p>
<p><strong>æ•°æ®å±æ€§</strong></p>
<ul>
<li><code>Configurable</code>ï¼šæ˜¯å¦å¯é…ç½®ï¼Œ<ul>
<li>èƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§</li>
<li>èƒ½å¦ä¿®æ”¹å±æ€§</li>
<li>èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§</li>
</ul>
</li>
<li><code>Enumerable</code>ï¼šèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›è¯¥å±æ€§</li>
<li><code>Get</code>ï¼šå–å€¼</li>
<li><code>Set</code>ï¼šèµ‹å€¼</li>
</ul>
<p><strong>è®¿é—®å™¨å±æ€§</strong></p>
<ul>
<li><code>Configurable</code>ï¼šæ˜¯å¦å¯é…ç½®ï¼Œ<ul>
<li>èƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§</li>
<li>èƒ½å¦ä¿®æ”¹å±æ€§</li>
<li>èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§</li>
</ul>
</li>
<li><code>Enumerable</code>ï¼šèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›è¯¥å±æ€§</li>
<li><code>Writable</code>ï¼šæ˜¯å¦å¯å†™</li>
<li><code>Value</code>ï¼šå±æ€§çš„å€¼</li>
</ul>
<p>æ•°ç»„çš„ length å±æ€§åˆå§‹åŒ–ä¸ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">enumberable</span>: <span class="literal">false</span>;</span><br><span class="line"><span class="attr">configurable</span>: <span class="literal">false</span>;</span><br><span class="line"><span class="attr">writable</span>: <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<p>å³ï¼Œæ— æ³•åˆ é™¤å’Œä¿®æ”¹ï¼ˆå¹¶éèµ‹å€¼ï¼‰length å±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(arr, <span class="string">&quot;length&quot;</span>, &#123; <span class="title function_">set</span>(<span class="params"></span>) &#123;&#125; &#125;);</span><br><span class="line"><span class="comment">// Uncaught TypeError: Cannot redefine property: length</span></span><br></pre></td></tr></table></figure>

<p>è€Œæ•°ç»„ç´¢å¼•åˆ™æ˜¯è®¿é—®æ•°ç»„å€¼çš„ä¸€ç§æ–¹å¼ã€‚è‹¥æ‹¿å®ƒä¸å¯¹è±¡ç›¸æ¯”è¾ƒ,**ç´¢å¼•å°±æ˜¯æ•°ç»„å±æ€§çš„<code>key</code>**ï¼Œå®ƒä¸<code>length</code>æ˜¯ 2 ä¸ªä¸åŒçš„æ¦‚å¿µ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line">a.<span class="property">length</span> = <span class="number">10</span>; <span class="comment">//[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, empty Ã— 7]</span></span><br><span class="line"><span class="comment">// æ˜¾å¼çš„ç»™lengthèµ‹å€¼ï¼Œç´¢å¼•3-9çš„å¯¹åº”çš„valueä¹Ÿä¼šèµ‹å€¼undefined</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯ç´¢å¼•3-9çš„keyéƒ½æ˜¯æ²¡æœ‰å€¼çš„</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥ç”¨for-inæ‰“å°ï¼Œåªä¼šæ‰“å°0,1,2</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> a) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// 0,1,2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span style="color: #009828;font-weight:700;">å½“æˆ‘ä»¬ç»™ length èµ‹å€¼æ—¶ï¼Œå¯ä»¥çœ‹è§å¹¶ä¸ä¼šéå†æ•°ç»„å»èµ‹å€¼ç´¢å¼•</span></p>
<blockquote>
<p>JavaScript æ•°ç»„çš„ length å±æ€§å’Œå…¶æ•°å­—ä¸‹æ ‡ä¹‹é—´æœ‰ç€ç´§å¯†çš„è”ç³»ã€‚æ•°ç»„å†…ç½®çš„å‡ ä¸ªæ–¹æ³•ï¼ˆä¾‹å¦‚ joinã€sliceã€indexOf ç­‰ï¼‰éƒ½ä¼šè€ƒè™‘ length çš„å€¼ã€‚å¦å¤–è¿˜æœ‰ä¸€äº›æ–¹æ³•ï¼ˆä¾‹å¦‚ pushã€splice ç­‰ï¼‰è¿˜ä¼šæ”¹å˜ length çš„å€¼ã€‚</p>
</blockquote>
<p>è¿™äº›å†…ç½®æ–¹æ³•åœ¨æ“ä½œæ•°ç»„æ—¶å‡ºå»æ”¹å˜å…¶ä¸­çš„å†…å®¹è¿˜ä¼šå½±å“ length çš„å€¼ã€‚åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li><p>â– å‡å°‘å€¼</p>
<ul>
<li>å½“æˆ‘ä»¬ shift ä¸€ä¸ªæ•°ç»„æ—¶ä½ ä¼šå‘ç°å®ƒä¼šéå†æ•°ç»„ã€‚æ­¤æ—¶æ•°ç»„çš„ç´¢å¼•å¯¹åº”çš„å€¼å¾—åˆ°äº†ç›¸åº”çš„æ›´æ–°ã€‚è¿™ç§æƒ…å†µå¯ä»¥è¢« Object.defineProperty æ£€æµ‹åˆ°ï¼Œå› ä¸ºæœ‰å±æ€§ï¼ˆç´¢å¼•ï¼‰çš„å­˜åœ¨ã€‚</li>
</ul>
</li>
<li><p>â• å¢åŠ å€¼</p>
<ul>
<li>push å€¼æ—¶ï¼Œæ•°ç»„çš„é•¿åº¦ä¼šå¢åŠ  1ï¼Œç´¢å¼•ä¹Ÿä¼šå¢åŠ  1.ä½†æ­¤æ—¶çš„ç´¢å¼•æ˜¯æ–°å¢çš„ã€‚è™½ç„¶ Object.defineProperty ä¸èƒ½æ£€æµ‹åˆ°æ–°å¢çš„å±æ€§(push ä¹‹å index è‡ªå¢ï¼Œç›¸å½“äºæ–°å¢ key)ï¼Œä½†æ˜¯åœ¨ Vue ä¸­ï¼Œæ–°å¢çš„å¯¹è±¡å±æ€§å¯ä»¥æ˜¾å¼çš„è°ƒç”¨ vm.$set æ¥æ·»åŠ ç›‘å¬</li>
<li>æ‰‹åŠ¨èµ‹å€¼ length ä¸ºä¸€ä¸ªæ›´å¤§çš„å€¼ã€‚æ­¤æ—¶é•¿åº¦ä¼šæ›´æ–°ï¼Œä½†å¯¹åº”çš„ç´¢å¼•ä¸ä¼šè¢«èµ‹å€¼ï¼Œå³å¯¹è±¡çš„å±æ€§ä¸º nullã€‚Object.defineProperty å†å¼ºä¹Ÿæ— æ³•å¤„ç†å¯¹æœªçŸ¥å±æ€§çš„ç›‘å¬</li>
</ul>
</li>
</ul>
<p>éªŒè¯ä¸€ä¸‹ä¸Šé¢çš„è®ºè¿°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿˜æ˜¯è€å¥—è·¯ï¼Œå®šä¹‰ä¸€ä¸ªobserveæ–¹æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">data, key, val</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, key, &#123;</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> <span class="title function_">defineGet</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–åˆ°çš„key: <span class="subst">$&#123;key&#125;</span> è·å–åˆ°çš„value: <span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> <span class="title function_">defineSet</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¾ç½®çš„key: <span class="subst">$&#123;key&#125;</span> è®¾ç½®çš„value: <span class="subst">$&#123;newVal&#125;</span>`</span>);</span><br><span class="line">      <span class="comment">// æ­¤å¤„å°†æ–°çš„å€¼èµ‹ç»™valï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€Œè¾¾åˆ°èµ‹å€¼çš„æ•ˆæœ</span></span><br><span class="line">      val = newVal;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">observe</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="title function_">defineReactive</span>(data, key, data[key]);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> test = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="title function_">observe</span>(test);</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬åšå¦‚ä¸‹æ“ä½œ<br><img src="../pic/defineProperty_1.jpg" alt="img"></p>
<p>ğŸ‘‰ğŸ» <code>push</code> æ—¶ï¼Œæ–°å¢äº†ç´¢å¼•å¹¶ä¸”æ”¹å˜äº†é•¿åº¦ï¼Œä½†æ–°ç´¢å¼•æœªè¢« <code>observe</code><br>ğŸ‘‰ğŸ» ä¿®æ”¹æ–°çš„ç´¢å¼•å¯¹åº”çš„å€¼<br>ğŸ‘‰ğŸ» å¼¹å‡ºæ–°çš„ç´¢å¼•å¯¹åº”çš„å€¼<br>ğŸ‘‰ğŸ» å¼¹å‡ºç´¢å¼•è¢« <code>observe</code> çš„å€¼æ—¶è§¦å‘äº† <code>get</code><br>ğŸ‘‰ğŸ» æ­¤æ—¶å†å»ç»™åŸç´¢å¼•èµ‹å€¼æ—¶å‘ç°å¹¶æ²¡æœ‰è§¦å‘è¢« <code>observe</code> çš„ <code>set</code>ï¼Œç”±æ­¤å¯è§æ•°ç»„ç´¢å¼•è¢«åˆ é™¤åå°±ä¸ä¼šè¢« <code>observe</code> åˆ°äº†<br>ğŸ‘‰ğŸ» <code>unshift</code>æ—¶ï¼Œä¼šå°†ç´¢å¼•ä¸º 0 å’Œ 1 çš„å€¼éå†å‡ºæ¥å­˜æ”¾ï¼Œç„¶åé‡æ–°èµ‹å€¼</p>
<p>ğŸ§ é‚£å¯¹è±¡çš„å±æ€§è¢«åˆ é™¤åæ˜¯å¦è¿˜å¯ä»¥è¢« <code>observe</code> åˆ°ä¹ˆï¼Ÿ<br><img src="../pic/defineProperty_2.jpg" alt="img"></p>
<h3 id="ğŸ’­-æ€»ç»“ä¸€ä¸‹"><a href="#ğŸ’­-æ€»ç»“ä¸€ä¸‹" class="headerlink" title="ğŸ’­ æ€»ç»“ä¸€ä¸‹"></a>ğŸ’­ æ€»ç»“ä¸€ä¸‹</h3><p>å¯¹äº<code>Object.defineProperty</code>æ¥è¯´ï¼Œå¤„ç†å¯¹è±¡å’Œæ•°ç»„ä¸€æ ·ï¼Œåªæ˜¯åœ¨åˆå§‹åŒ–æ—¶å»æ”¹å†™<code>get</code>å’Œ<code>set</code>è¾¾åˆ°ç›‘æµ‹æ•°ç»„æˆ–å¯¹è±¡çš„å˜åŒ–ã€‚å¯¹äºæ–°å¢çš„å±æ€§ï¼Œéœ€è¦æ‰‹åŠ¨å†åˆå§‹åŒ–ã€‚</p>
<p>å¯¹äºæ•°ç»„æ¥è¯´ï¼Œåªä¸è¿‡ç‰¹åˆ«äº†ç‚¹ï¼ŒæŸäº›æ–¹æ³•ä¾‹å¦‚<code>push</code>ã€<code>unshift</code>ç­‰ä¹Ÿä¼šæ–°å¢ç´¢å¼•ã€‚å¯¹äºæ–°å¢çš„ç´¢å¼•äº¦å¯ä»¥æ·»åŠ <code>observe</code>ä»è€Œè¾¾åˆ°ç›‘å¬çš„æ•ˆæœã€‚è€Œ<code>pop</code>å’Œ<code>shift</code>åˆ™ä¼šåˆ é™¤æ›´æ–°ç´¢å¼•ï¼Œä¹Ÿä¼šå‡ºå‘<code>Object.defineProperty</code>çš„<code>get</code>å’Œ<code>set</code>ã€‚å¯¹äºé‡æ–°èµ‹å€¼<code>length</code>çš„æ•°ç»„ï¼Œä¸ä¼šæ–°å¢ç´¢å¼•ï¼Œå› ä¸ºä¸æ¸…æ¥šæ–°å¢çš„ç´¢å¼•æ•°é‡ã€‚</p>
<blockquote>
<p>æ‰€ä»¥åœ¨ Vue ä¸­æˆ‘ä»¬æ˜¯å¯ä»¥æ˜¾å¼çš„é€šè¿‡è°ƒç”¨ vm.$set ç›‘å¬å¯¹è±¡æ–°å¢çš„é”®ï¼ˆkeyï¼‰ã€‚ä½†è¿™æ ·ç›¸å¯¹æ¥è®²æ¯”è¾ƒæŸè€—æ€§èƒ½ï¼Œæ‰€ä»¥å°¤å¤§ç”¨äº†å¦ä¸€ç§ â€œå¥‡æŠ€æ·«å·§â€ æ¥ä¿è¯æ•°ç»„çš„æ›´æ–°å¯ä»¥å®æ—¶åŒæ­¥åˆ° data ä¸­</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> aryMethods = [</span><br><span class="line">  <span class="string">&quot;push&quot;</span>,</span><br><span class="line">  <span class="string">&quot;pop&quot;</span>,</span><br><span class="line">  <span class="string">&quot;shift&quot;</span>,</span><br><span class="line">  <span class="string">&quot;unshift&quot;</span>,</span><br><span class="line">  <span class="string">&quot;splice&quot;</span>,</span><br><span class="line">  <span class="string">&quot;sort&quot;</span>,</span><br><span class="line">  <span class="string">&quot;reverse&quot;</span>,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> arrayAugmentations = [];</span><br><span class="line"></span><br><span class="line">aryMethods.<span class="title function_">forEach</span>(<span class="function">(<span class="params">method</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæ˜¯åŸç”ŸArrayçš„åŸå‹æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">let</span> original = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>[method];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†push, popç­‰å°è£…å¥½çš„æ–¹æ³•å®šä¹‰åœ¨å¯¹è±¡arrayAugmentationsçš„å±æ€§ä¸Š</span></span><br><span class="line">  <span class="comment">// æ³¨æ„ï¼šæ˜¯å±æ€§è€ŒéåŸå‹å±æ€§!</span></span><br><span class="line">  arrayAugmentations[method] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æˆ‘è¢«æ”¹å˜å•¦!&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨å¯¹åº”çš„åŸç”Ÿæ–¹æ³•å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> original.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="comment">// å°†æˆ‘ä»¬è¦ç›‘å¬çš„æ•°ç»„çš„åŸå‹æŒ‡é’ˆæŒ‡å‘ä¸Šé¢å®šä¹‰çš„ç©ºæ•°ç»„å¯¹è±¡</span></span><br><span class="line"><span class="comment">// åˆ«å¿˜äº†è¿™ä¸ªç©ºæ•°ç»„çš„å±æ€§ä¸Šå®šä¹‰äº†æˆ‘ä»¬å°è£…å¥½çš„pushç­‰æ–¹æ³•</span></span><br><span class="line">list.<span class="property">__proto__</span> = arrayAugmentations;</span><br><span class="line">list.<span class="title function_">push</span>(<span class="string">&quot;d&quot;</span>); <span class="comment">// æˆ‘è¢«æ”¹å˜å•¦ï¼ 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„list2æ²¡æœ‰è¢«é‡æ–°å®šä¹‰åŸå‹æŒ‡é’ˆï¼Œæ‰€ä»¥å°±æ­£å¸¸è¾“å‡º</span></span><br><span class="line"><span class="keyword">let</span> list2 = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line">list2.<span class="title function_">push</span>(<span class="string">&quot;d&quot;</span>); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<p>å‚è€ƒæ–‡ç« ï¼š<br>[1] <a target="_blank" rel="noopener" href="https://burning-shadow.github.io/2019/04/25/%E4%B8%BA%E4%BB%80%E4%B9%88Object.defineProperty%E4%B8%8D%E8%83%BD%E6%A3%80%E6%B5%8B%E5%88%B0%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6%E7%9A%84%E5%8F%98%E5%8C%96/">ä¸ºä»€ä¹ˆ Object.defineProperty ä¸èƒ½æ£€æµ‹åˆ°æ•°ç»„é•¿åº¦çš„å˜åŒ–</a><br>[2] <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903710410162183">ES6 ç³»åˆ—ä¹‹ defineProperty ä¸ proxy</a><br>[3] <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">Object.defineProperty MDN</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/23/Sveltejs%E4%B8%8A%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Carpe diem !">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="çŸ¥è¯†ç›²ç›’">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/23/Sveltejs%E4%B8%8A%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C/" class="post-title-link" itemprop="url">Sveltejsä¸Šæ‰‹åˆä½“éªŒ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-03-23 14:07:59 / ä¿®æ”¹æ—¶é—´ï¼š14:10:01" itemprop="dateCreated datePublished" datetime="2023-03-23T14:07:59+08:00">2023-03-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/23/Hexo&Next%20%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Carpe diem !">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="çŸ¥è¯†ç›²ç›’">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/23/Hexo&Next%20%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F/" class="post-title-link" itemprop="url">Hexoçš„Nextä¸»é¢˜è‡ªå®šä¹‰æ ·å¼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-03-23 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š15:31:53" itemprop="dateCreated datePublished" datetime="2023-03-23T00:00:00+08:00">2023-03-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼"><a href="#è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼"></a>è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼</h1><h2 id="x1F308-æ·»åŠ åŠ¨æ€èƒŒæ™¯"><a href="#x1F308-æ·»åŠ åŠ¨æ€èƒŒæ™¯" class="headerlink" title="&#x1F308;æ·»åŠ åŠ¨æ€èƒŒæ™¯"></a>&#x1F308;æ·»åŠ åŠ¨æ€èƒŒæ™¯</h2><blockquote>
<p><font color="#f60"><b>æ³¨æ„</b></font> ï¼šå¦‚æœnextä¸»é¢˜åœ¨5.1.1ä»¥ä¸Šçš„è¯å°±ä¸ç”¨æˆ‘è¿™æ ·è®¾ç½®ï¼Œç›´æ¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°canvas_nest: falseï¼ŒæŠŠå®ƒæ”¹ä¸ºcanvas_nest: trueå°±è¡Œäº†ï¼ˆæ³¨æ„åˆ†å·åé¢è¦åŠ ä¸€ä¸ªç©ºæ ¼ï¼‰</p>
</blockquote>
<h3 id="ä¿®æ”¹-layout-swig"><a href="#ä¿®æ”¹-layout-swig" class="headerlink" title="ä¿®æ”¹ _layout.swig"></a>ä¿®æ”¹ <span style="color:#f60;background-color:#f0f0f0;border:1px solid #D9D9D9;padding:3px;font-weight:700">_layout.swig</span></h3><p><span>æ‰“å¼€ </span><span style="color:#f60;background-color:#f0f0f0;border:1px solid #D9D9D9;padding:3px;font-weight:700">themes / next / layout / _layout.swig</span></p>

 <p>åœ¨ <span style="color:#f60;background-color:#f0f0f0;border:1px solid #D9D9D9;padding:3px;font-weight:700">< /body></span> ä¹‹å‰æ·»åŠ ä»£ç (æ³¨æ„ä¸è¦æ”¾åœ¨< /head>çš„åé¢)</p>
  
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.canvas_nest %&#125;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p><span>æ‰“å¼€ </span><span style="color:#f60;background-color:#f0f0f0;border:1px solid #D9D9D9;padding:3px;font-weight:700">themes / next / _config.yml</span><span>ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š(å¯ä»¥æ”¾åœ¨æœ€åé¢)</span></p>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># --------------------------------------------------------------</span><br><span class="line"># background settings</span><br><span class="line"># --------------------------------------------------------------</span><br><span class="line"># add canvas-nest effect</span><br><span class="line"># see detail from https://github.com/hustcc/canvas-nest.js</span><br><span class="line">canvas_nest: true</span><br></pre></td></tr></table></figure>
<p>åˆ°æ­¤å°±ç»“æŸäº†ï¼Œè¿è¡Œ hexo cleanï¼Œç„¶åè¿è¡Œ hexo g,ç„¶åè¿è¡Œ hexo s</p>
<p>å¦‚æœæ„Ÿè§‰é»˜è®¤çš„çº¿æ¡å¤ªå¤šçš„è¯ï¼Œå¯ä»¥æ”¹ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.canvas_nest %&#125;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;</span><br><span class="line">color=&quot;0,0,255&quot; opacity=&#x27;0.7&#x27; zIndex=&quot;-2&quot; count=&quot;99&quot; src=&quot;//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®é¡¹è¯´æ˜"><a href="#é…ç½®é¡¹è¯´æ˜" class="headerlink" title="é…ç½®é¡¹è¯´æ˜"></a>é…ç½®é¡¹è¯´æ˜</h4><ul>
<li>color ï¼šçº¿æ¡é¢œè‰², é»˜è®¤: â€˜0,0,0â€™ï¼›ä¸‰ä¸ªæ•°å­—åˆ†åˆ«ä¸º(R,G,B)</li>
<li>opacity: çº¿æ¡é€æ˜åº¦ï¼ˆ0~1ï¼‰, é»˜è®¤: 0.5</li>
<li>count: çº¿æ¡çš„æ€»æ•°é‡, é»˜è®¤: 150</li>
<li>zIndex: èƒŒæ™¯çš„z-indexå±æ€§ï¼Œcsså±æ€§ç”¨äºæ§åˆ¶æ‰€åœ¨å±‚çš„ä½ç½®, é»˜è®¤: -1</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Carpe diem !</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Carpe diem !</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  
  <script type="text/javascript"
  color="0,0,255" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  
</body>
</html>
